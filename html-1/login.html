<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" href="css/style.css" />
		<link rel="stylesheet" href="css/iconfont.css" />
		<title>登录界面</title>
	</head>
	<body>
		<div id="bigBox">
			<h1>LOGIN</h1>
			<div class="inputBox">
				<div class="inputText">
					<span class="iconfont icon-nickname"></span>
					<input type="text" placeholder="Username" id="inputUsername" />
				</div>
				<div class="inputText">
					<span class="iconfont icon-visible"></span>
					<input type="password" placeholder="Password" id="inputPassword" />
				</div>
			</div>
			<input class="loginButton" type="button" value="Login" id="btn" />
    </div>
    

    <script src="./jquery-3.5.1.min.js"></script>

    <script>
      //发送post请求
      function post(url,data={}){
        return $.ajax({
          type:'post',
          url,
          data: JSON.stringify(data),
          contentType: "application/json",
        })
      }

      $('#btn').click(() => {
            const username = $('#inputUsername').val()
            const password = $('#inputPassword').val()
            console.log("username", username, "password", password);
            const url = '/api/user/login'
            const data = {
                username,
                password
            }
            post(url, data).then(res => {
                if (res.errno === 0) {
                    // 登录成功
                    alert(res.message)
                    location.href = '/admin.html'
                } else {
                    // 登录失败
                    alert(res.message)
                }
            })
        })
    </script>
	</body>
</html>
